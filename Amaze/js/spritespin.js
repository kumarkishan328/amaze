!function(e){"use strict";function t(e,t,a){for(e=String(e);e.length<t;)e=String(a)+e;return e}function a(e,t,a){return e>a?a:t>e?t:e}function n(e,t,a,n){for(;e>a;)e-=n;for(;t>e;)e+=n;return e}function r(e){return e.preventDefault(),!1}function o(){window.console&&window.console.log&&window.console.log.apply(window.console,arguments)}function i(e,t,a){a&&e.bind(t+"."+m,a)}function s(e){e.unbind("."+m)}function d(e){var t,a,n="string"==typeof e.source?[e.source]:e.source,r=0,o=[],i=function(){r+=1,"function"==typeof e.progress&&e.progress({loaded:r,total:n.length,percent:Math.round(r/n.length*100)}),r===o.length&&"function"==typeof e.complete&&e.complete(o)};for(t=0;t<n.length;t+=1)a=new Image,o.push(a),a.onload=a.onabort=a.onerror=i,a.src=n[t]}function u(e,t){var a,n,r=(t||e).width,i=(t||e).height;if(r*i>1048576){if(a=document.createElement("canvas"),!a||!a.getContext||!a.getContext("2d"))return!1;a.width=a.height=1,n=a.getContext("2d"),n.fillStyle="FF00FF",n.fillRect(0,0,1,1),n.drawImage(e,-r+1,0);try{var s=n.getImageData(0,0,1,1).data;return 255===s[0]&&0===s[1]&&255===s[2]}catch(d){return o(d.message,d.stack),!1}}return!1}function c(e){var t=new Image;return t.src=e.src,{width:t.width,height:t.height}}var h=window.SpriteSpin={},m=h.namespace="spritespin",f=["mousedown","mousemove","mouseup","mouseenter","mouseover","mouseleave","dblclick","touchstart","touchmove","touchend","touchcancel","selectstart","gesturestart","gesturechange","gestureend"];h.mods={},h.defaults={source:void 0,width:void 0,height:void 0,frames:void 0,framesX:void 0,lanes:1,module:"360",behavior:"drag",renderer:"canvas",lane:0,frame:0,frameTime:40,animate:!1,reverse:!1,loop:!0,stopFrame:0,wrap:!0,wrapLane:!1,sense:1,senseLane:void 0,orientation:"horizontal",onInit:void 0,onProgress:void 0,onLoad:void 0,onFrame:void 0,onDraw:void 0},h.sourceArray=function(e,a){var n=0,r=0,o=0,i=0,s=a.digits||2;a.frame&&(n=a.frame[0],r=a.frame[1]),a.lane&&(o=a.lane[0],i=a.lane[1]);var d,u,c,h=[];for(d=o;i>=d;d+=1)for(u=n;r>=u;u+=1)c=e.replace("{lane}",t(d,s,0)),c=c.replace("{frame}",t(u,s,0)),h.push(c);return h},h.measureSource=function(e){var t=e.images[0],a=c(t);if(1===e.images.length){if(e.sourceWidth=a.width,e.sourceHeight=a.height,u(t,a)&&(e.sourceWidth/=2,e.sourceHeight/=2),e.framesX=e.framesX||e.frames,!e.frameWidth||!e.frameHeight)if(e.framesX){e.frameWidth=Math.floor(e.sourceWidth/e.framesX);var n=Math.ceil(e.frames*e.lanes/e.framesX);e.frameHeight=Math.floor(e.sourceHeight/n)}else e.frameWidth=a.width,e.frameHeight=a.height}else e.sourceWidth=e.frameWidth=a.width,e.sourceHeight=e.frameHeight=a.height,u(t,a)&&(e.sourceWidth=e.frameWidth=a.width/2,e.sourceHeight=e.frameHeight=a.height/2),e.frames=e.frames||e.images.length},h.resetInput=function(e){e.startX=e.startY=void 0,e.currentX=e.currentY=void 0,e.oldX=e.oldY=void 0,e.dX=e.dY=e.dW=0,e.ddX=e.ddY=e.ddW=0},h.updateInput=function(e,t){void 0===e.touches&&void 0!==e.originalEvent&&(e.touches=e.originalEvent.touches),t.oldX=t.currentX,t.oldY=t.currentY,void 0!==e.touches&&e.touches.length>0?(t.currentX=e.touches[0].clientX,t.currentY=e.touches[0].clientY):(t.currentX=e.clientX,t.currentY=e.clientY),(void 0===t.startX||void 0===t.startY)&&(t.startX=t.currentX,t.startY=t.currentY,t.clickframe=t.frame,t.clicklane=t.lane),t.dX=t.currentX-t.startX,t.dY=t.currentY-t.startY,t.ddX=t.currentX-t.oldX,t.ddY=t.currentY-t.oldY,t.ndX=t.dX/t.width,t.ndY=t.dY/t.height,t.nddX=t.ddX/t.width,t.nddY=t.ddY/t.height},h.updateFrame=function(e,t,r){void 0!==t?e.frame=Number(t):e.animation&&(e.frame+=e.reverse?-1:1),e.animation?(e.frame=n(e.frame,0,e.frames-1,e.frames),e.loop||e.frame!==e.stopFrame||(e.animate=!1,h.stopAnimation(e))):e.wrap?e.frame=n(e.frame,0,e.frames-1,e.frames):e.frame=a(e.frame,0,e.frames-1),void 0!==r&&(e.lane=r,e.lane=a(e.lane,0,e.lanes-1)),e.target.trigger("onFrame",e),e.target.trigger("onDraw",e)},h.stopAnimation=function(e){e.animation&&(window.clearInterval(e.animation),e.animation=null)},h.setAnimation=function(e){h.stopAnimation(e),e.animate&&(e.animation=window.setInterval(function(){try{h.updateFrame(e)}catch(t){}},e.frameTime))},h.setModules=function(t){var a,n,r;for(a=0;a<t.mods.length;a+=1)n=t.mods[a],"string"==typeof n&&(r=h.mods[n],r?t.mods[a]=r:e.error("No module found with name "+n))},h.setLayout=function(e){e.target.attr("unselectable","on").css({"-ms-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});var t=Math.floor(e.width||e.frameWidth||e.target.innerWidth()),a=Math.floor(e.height||e.frameHeight||e.target.innerHeight());e.target.css({width:t,height:a,position:"relative",overflow:"hidden"});var n={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute"};e.stage.css(n).hide(),e.canvas&&(e.canvas[0].width=t,e.canvas[0].height=a,e.canvas.css(n).hide())},h.setEvents=function(e){var t,a,n,o=e.target;for(s(o),a=0;a<f.length;a+=1)i(o,f[a],r);for(t=0;t<e.mods.length;t+=1){for(n=e.mods[t],a=0;a<f.length;a+=1)i(o,f[a],n[f[a]]);i(o,"onInit",n.onInit),i(o,"onLoad",n.onLoad),i(o,"onFrame",n.onFrame),i(o,"onDraw",n.onDraw)}i(o,"onLoad",function(e,t){h.setAnimation(t)}),i(o,"onInit",e.onInit),i(o,"onProgress",e.onProgress),i(o,"onLoad",e.onLoad),i(o,"onFrame",e.onFrame),i(o,"onDraw",e.onDraw)},h.boot=function(e){h.setModules(e),h.setLayout(e),h.setEvents(e),e.target.addClass("loading").trigger("onInit",e),d({source:e.source,progress:function(t){e.target.trigger("onProgress",t)},complete:function(t){e.images=t,h.measureSource(e),e.stage.show(),e.target.removeClass("loading").trigger("onLoad",e).trigger("onFrame",e).trigger("onDraw",e)}})},h.create=function(t){var a=t.target,n=a.data(m);if(n)e.extend(n,t);else{if(n=e.extend({},h.defaults,t),n.source=n.source||[],a.find("img").each(function(){n.source.push(e(this).attr("src"))}),a.empty().addClass("spritespin-instance").append("<div class='spritespin-stage'></div>"),"canvas"===n.renderer){var r=e("<canvas class='spritespin-canvas'></canvas>")[0];r.getContext&&r.getContext("2d")?(n.canvas=e(r),n.context=r.getContext("2d"),a.append(n.canvas),a.addClass("with-canvas")):n.renderer="image"}n.target=a,n.stage=a.find(".spritespin-stage"),a.data(m,n)}"string"==typeof n.source&&(n.source=[n.source]),(n.behavior||n.module)&&(n.mods=[],n.behavior&&n.mods.push(n.behavior),n.module&&n.mods.push(n.module),delete n.behavior,delete n.module),h.boot(n)},h.destroy=function(e){e&&(h.stopAnimation(e),s(e.target),e.target.removeData(m))},h.registerModule=function(t,a){return h.mods[t]&&e.error("Module name is already taken: "+t),a=a||{},h.mods[t]=a,a},h.Api=function(e){this.data=e},h.extendApi=function(t){var a,n=h.Api.prototype;for(a in t)t.hasOwnProperty(a)&&(n[a]?e.error("API method is already defined: "+a):n[a]=t[a]);return n},e.fn.spritespin=function(t){return"data"===t?this.data(m):"api"===t?new h.Api(this.data(m)):"destroy"===t?e(this).each(function(){h.destroy(e(this).data(m))}):"object"==typeof t?(t.target=t.target||e(this),h.create(t),t.target):e.error("Invalid call to spritespin")}}(window.jQuery||window.Zepto||window.$),function(e){"use strict";var t=window.SpriteSpin;t.extendApi({isPlaying:function(){return null!==this.data.animation},isLooping:function(){return this.data.loop},toggleAnimation:function(){this.data.animate=!this.data.animate,t.setAnimation(this.data)},stopAnimation:function(){this.data.animate=!1,t.setAnimation(this.data)},startAnimation:function(){this.data.animate=!0,t.setAnimation(this.data)},loop:function(e){return this.data.loop=e,t.setAnimation(this.data),this},currentFrame:function(){return this.data.frame},updateFrame:function(e){return t.updateFrame(this.data,e),this},skipFrames:function(e){var a=this.data;return t.updateFrame(a,a.frame+(a.reverse?-e:+e)),this},nextFrame:function(){return this.skipFrames(1)},prevFrame:function(){return this.skipFrames(-1)},playTo:function(e,a){var n=this.data;if(a=a||{},a.force||n.frame!==e){if(a.nearest){var r=e-n.frame,o=e>n.frame?r-n.frames:r+n.frames,i=Math.abs(r)<Math.abs(o)?r:o;n.reverse=0>i}return n.animate=!0,n.loop=!1,n.stopFrame=e,t.setAnimation(n),this}}})}(window.jQuery||window.Zepto||window.$),function(e,t){"use strict";function a(a){var n=e(this),r=n.data("spritespin");t.updateInput(a,r);var o,i;"horizontal"===r.orientation?(o=r.target.innerWidth()/2,i=r.currentX-r.target.offset().left):(o=r.target.innerHeight()/2,i=r.currentY-r.target.offset().top),i>o?n.spritespin("next"):n.spritespin("prev")}t.registerModule("click",{mouseup:a,touchend:a})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(a){var n=e(this).spritespin("data");t.updateInput(a,n),n.dragging=!0}function n(){var a=e(this),n=a.spritespin("data");t.resetInput(n),n.dragging=!1}function r(a){var n,r,o,i,s=e(this),d=s.spritespin("data");if(d.dragging){t.updateInput(a,d);var u=0;u="number"==typeof d.orientation?(Number(d.orientation)||0)*Math.PI/180:"horizontal"===d.orientation?0:Math.PI/2;var c=Math.sin(u),h=Math.cos(u),m=d.ndX*h-d.ndY*c,f=d.ndX*c+d.ndY*h;n=m*d.frames*d.sense,r=f*d.lanes*(d.senseLane||d.sense),i=Math.floor(d.clickframe+n),o=Math.floor(d.clicklane+r),t.updateFrame(d,i,o),d.animate=!1,t.stopAnimation(d)}}t.registerModule("drag",{mousedown:a,mousemove:r,mouseup:n,mouseleave:n,touchstart:a,touchmove:r,touchend:n,touchcancel:n}),t.registerModule("move",{mousemove:function(e){a.call(this,e),r.call(this,e)},mouseleave:n,touchstart:a,touchmove:r,touchend:n,touchcancel:n})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(a){var n=e(this),r=n.spritespin("data");t.updateInput(a,r),r.onDrag=!0,n.spritespin("animate",!0)}function n(a){var n=e(this),r=n.spritespin("data");t.resetInput(r),r.onDrag=!1,n.spritespin("animate",!1)}function r(a){var n=e(this),r=n.spritespin("data");if(r.onDrag){t.updateInput(a,r);var o,i;"horizontal"===r.orientation?(o=r.target.innerWidth()/2,i=(r.currentX-r.target.offset().left-o)/o):(o=r.height/2,i=(r.currentY-r.target.offset().top-o)/o),r.reverse=0>i,i=0>i?-i:i,r.frameTime=80*(1-i)+20}}t.registerModule("hold",{mousedown:a,mousemove:r,mouseup:n,mouseleave:n,touchstart:a,touchmove:r,touchend:n,touchcancel:n,onFrame:function(){var t=e(this);t.spritespin("animate",!0)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(a){var n=e(this),r=n.spritespin("data");t.updateInput(a,r),r.onDrag=!0}function n(){var a=e(this),n=a.spritespin("data");n.onDrag=!1,t.resetInput(n)}function r(a){var n=e(this),r=n.spritespin("data");if(r.onDrag){t.updateInput(a,r);var o,i,s=r.frame,d=r.snap||.25;"horizontal"===r.orientation?(o=r.dX,i=r.target.innerWidth()*d):(o=r.dY,i=r.target.innerHeight()*d),o>i?(s=r.frame-1,r.onDrag=!1):-i>o&&(s=r.frame+1,r.onDrag=!1),n.spritespin("update",s),n.spritespin("animate",!1)}}t.registerModule("swipe",{mousedown:a,mousemove:r,mouseup:n,mouseleave:n,touchstart:a,touchmove:r,touchend:n,touchcancel:n})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e,t){"use strict";function a(t){var a=t.lane*t.frames+t.frame,n=t.frameWidth*(a%t.framesX),o=t.frameHeight*r(a/t.framesX);return"canvas"===t.renderer?(t.context.clearRect(0,0,t.width,t.height),void t.context.drawImage(t.images[0],n,o,t.frameWidth,t.frameHeight,0,0,t.width,t.height)):(n=-r(n*t.scaleWidth),o=-r(o*t.scaleHeight),void("background"===t.renderer?t.stage.css({"background-image":["url('",t.source[0],"')"].join(""),"background-position":[n,"px ",o,"px"].join("")}):e(t.images).css({top:o,left:n})))}function n(t){var a=t.lane*t.frames+t.frame;"canvas"===t.renderer?(t.context.clearRect(0,0,t.width,t.height),t.context.drawImage(t.images[a],0,0,t.width,t.height)):"background"===t.renderer?t.stage.css({"background-image":["url('",t.source[a],"')"].join(""),"background-position":[0,"px ",0,"px"].join("")}):(e(t.images).hide(),e(t.images[a]).show())}var r=Math.floor;t.registerModule("360",{onLoad:function(t,a){var n,o;if(a.scaleWidth=a.width/a.frameWidth,a.scaleHeight=a.height/a.frameHeight,a.sourceIsSprite=1===a.images.length,a.stage.empty().css({"background-image":"none"}).show(),"canvas"===a.renderer)a.context.clearRect(0,0,a.width,a.height),a.canvas.show();else if("background"===a.renderer){a.sourceIsSprite?(n=r(a.sourceWidth*a.scaleWidth),o=r(a.sourceHeight*a.scaleHeight)):(n=r(a.frameWidth*a.scaleWidth),o=r(a.frameHeight*a.scaleHeight));var i=[n,"px ",o,"px"].join("");a.stage.css({"background-repeat":"no-repeat","-webkit-background-size":i,"-moz-background-size":i,"-o-background-size":i,"background-size":i})}else"image"===a.renderer&&(a.sourceIsSprite?(n=r(a.sourceWidth*a.scaleWidth),o=r(a.sourceHeight*a.scaleHeight)):n=o="100%",e(a.images).appendTo(a.stage).css({width:n,height:o,position:"absolute"}))},onDraw:function(e,t){t.sourceIsSprite?a(t):n(t)}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin),function(e){"use strict";var t=window.SpriteSpin.mods.gallery={};t.onLoad=function(t,a){a.images=[],a.offsets=[],a.stage.empty(),a.speed=500,a.opacity=.25,a.oldFrame=0;var n,r=0;for(n=0;n<a.source.length;n+=1){var o=e("<img src='"+a.source[n]+"'/>");a.stage.append(o),a.images.push(o),a.offsets.push(-r+(a.width-o[0].width)/2),r+=o[0].width,o.css({opacity:.25})}a.stage.css({width:r}),a.images[a.oldFrame].animate({opacity:1},a.speed)},t.onDraw=function(e,t){t.oldFrame!==t.frame&&t.offsets?(t.stage.stop(!0,!1),t.stage.animate({left:t.offsets[t.frame]},t.speed),t.images[t.oldFrame].animate({opacity:t.opacity},t.speed),t.oldFrame=t.frame,t.images[t.oldFrame].animate({opacity:1},t.speed)):t.stage.css({left:t.offsets[t.frame]+t.dX})},t.resetInput=function(e,t){t.onDrag||t.stage.animate({left:t.offsets[t.frame]})}}(window.jQuery||window.Zepto||window.$),function(e,t){"use strict";var a=Math.floor;t.registerModule("panorama",{onLoad:function(e,t){t.stage.empty().show(),t.frames=t.sourceWidth,"horizontal"===t.orientation?(t.scale=t.height/t.sourceHeight,t.frames=t.sourceWidth):(t.scale=t.width/t.sourceWidth,t.frames=t.sourceHeight);var n=a(t.sourceWidth*t.scale),r=a(t.sourceHeight*t.scale),o=[n,"px ",r,"px"].join("");t.stage.css({"background-image":["url('",t.source[0],"')"].join(""),"background-repeat":"repeat-both","-webkit-background-size":o,"-moz-background-size":o,"-o-background-size":o,"background-size":o})},onDraw:function(e,t){var n=0,r=0;"horizontal"===t.orientation?n=-a(t.frame%t.frames*t.scale):r=-a(t.frame%t.frames*t.scale),t.stage.css({"background-position":[n,"px ",r,"px"].join("")})}})}(window.jQuery||window.Zepto||window.$,window.SpriteSpin);